@{
    ViewData["Title"] = "Tổng quan";
    // Layout = "_Layout"; // Bỏ comment dòng này nếu có dùng chung Layout

    // 1. LẤY TÊN NGƯỜI DÙNG ĐANG ĐĂNG NHẬP (Nếu chưa đăng nhập thì để chữ "Bạn")
    var userName = User.Identity?.IsAuthenticated == true ? User.Identity.Name : "Sawn05";
    // Mẹo: Nếu muốn chỉ lấy tên trước chữ @gmail.com, bạn có thể xử lý chuỗi ở đây.

    // 2. DỮ LIỆU THỐNG KÊ (Sau này sẽ Count() từ CSDL)
    int totalAccounts = 12;
    int tasksToday = 8;
    int totalNotes = 24;
    string completionRate = "75%";

    // 3. DỮ LIỆU HOẠT ĐỘNG GẦN ĐÂY
    var recentActivities = new[] {
        new { 
            Title = "Đã thêm tài khoản Facebook mới", 
            Time = "2 giờ trước", 
            IconColor = "#667eea", 
            BgColor = "rgba(102, 126, 234, 0.1)", 
            SvgPath = "M12 4v16m8-8H4" 
        },
        new { 
            Title = "Hoàn thành task \"Kiểm tra inventory\"", 
            Time = "4 giờ trước", 
            IconColor = "#10b981", 
            BgColor = "rgba(16, 185, 129, 0.1)", 
            SvgPath = "M5 13l4 4L19 7" 
        },
        new { 
            Title = "Cập nhật ghi chú \"Join Tables\"", 
            Time = "Hôm qua", 
            IconColor = "#f59e0b", 
            BgColor = "rgba(245, 158, 11, 0.1)", 
            SvgPath = "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" 
        }
    };
}

<div class="main-content">
    <div class="page-header">
        <div class="header-top">
            <div>
                <h1 class="page-title">👋 Chào mừng trở lại, @userName!</h1>
                <p style="color: var(--text-secondary); margin-top: 8px">
                    Đây là tổng quan về hoạt động của bạn hôm nay
                </p>
            </div>
            <button class="btn btn-primary">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Tạo mới
            </button>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Tổng tài khoản</div>
                <div class="stat-value">@totalAccounts</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Tasks hôm nay</div>
                <div class="stat-value">@tasksToday</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Ghi chú</div>
                <div class="stat-value">@totalNotes</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Hoàn thành</div>
                <div class="stat-value">@completionRate</div>
            </div>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-xl); margin-top: var(--spacing-2xl);">
        
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Hoạt động gần đây</h2>
            </div>

            <div class="activity-list">
                @foreach (var act in recentActivities)
                {
                    <div class="activity-item">
                        <div class="activity-icon" style="background: @act.BgColor; color: @act.IconColor;">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="@act.SvgPath" />
                            </svg>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">@act.Title</div>
                            <div class="activity-time">@act.Time</div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Thao tác nhanh</h2>
            </div>

            <div class="quick-actions">
                <button class="quick-action-btn" onclick="location.href='@Url.Action("Accounts", "Notes")'">
                    <div class="quick-action-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                    </div>
                    <span>Thêm tài khoản</span>
                </button>

                <button class="quick-action-btn" onclick="location.href='@Url.Action("Tasks", "Notes")'">
                    <div class="quick-action-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
                    </div>
                    <span>Tạo task mới</span>
                </button>

                <button class="quick-action-btn" onclick="location.href='@Url.Action("Index", "Notes")'">
                    <div class="quick-action-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                    </div>
                    <span>Viết ghi chú</span>
                </button>
            </div>
        </div>
    </div>
</div>